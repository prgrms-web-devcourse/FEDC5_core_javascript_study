## í´ë¡œì €

- **í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì–¸ì–´**ì—ì„œ ë“±ì¥í•˜ëŠ” ë³´í¸ì ì¸ íŠ¹ì„±ìœ¼ë¡œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ë§Œì˜ íŠ¹ì„±ì€ ì•„ë‹ˆë‹¤.
```
ğŸ“Œ í•¨ìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œ ë§Œë“¤ì–´ì§„ ìœ íš¨ë²”ìœ„ê°€ ì‚¬ë¼ì§„ í›„ì—ë„ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜?
ğŸ“Œ ì´ë¯¸ ìƒëª…ì£¼ê¸° ìƒ ëë‚œ ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” í•¨ìˆ˜?
ğŸ“Œ í•¨ìˆ˜ì™€ ê·¸ í•¨ìˆ˜ê°€ ì„ ì–¸ë  ë‹¹ì‹œì˜ lexical environmentì˜ ìƒí˜¸ê´€ê³„ì— ë”°ë¥¸ í˜„ìƒ?
```
ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ì •ì˜ê°€ ì¡´ì¬í•œë‹¤. 

> í•¨ìˆ˜ê°€ ì„ ì–¸ë  ë‹¹ì‹œì˜ lexical environmentê°€ ë­˜ê¹Œ?

### ì´ì¯¤ì—ì„œ ë‹¤ì‹œ ë³µìŠµí•´ë³´ëŠ” ì‹¤í–‰ ì»¨íƒìŠ¤íŠ¸...

- ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ : ì‹¤í–‰í•  ì½”ë“œì— ì œê³µí•  í™˜ê²½ ì •ë³´ë“¤ì„ ëª¨ì•„ë†“ì€ ê°ì²´
- í•¨ìˆ˜ë¥¼ **ì‹¤í–‰í•  ë•Œ**, ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ **ìƒì„±**ë˜ì–´ ì½œ ìŠ¤íƒì— ìŒ“ì¸ë‹¤.

 ![excution_context](images/execution_context.png)

- `Lexical Environment` : í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ ë‚´ë¶€ì˜ ì‹ë³„ì, ì™¸ë¶€ í™˜ê²½ë¥¼ ì°¸ì¡°í•˜ëŠ” í¬ì¸í„° ë“±ì˜ í™˜ê²½ ì •ë³´ë“¤
  - `Environment Record` : ë‚´ë¶€ ì‹ë³„ì (ë§¤ê°œë³€ìˆ˜, ì„ ì–¸ëœ í•¨ìˆ˜, ì„ ì–¸ëœ ë³€ìˆ˜)
  - `Outer Environment` : ì™¸ë¶€ Lexical Environmentì„ ì°¸ì¡°í•˜ëŠ” í¬ì¸í„°. scope chainì´ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.
    - scope chain : ë‚´ë¶€ ì‹ë³„ìì˜ ìœ íš¨ë²”ìœ„ë¥¼ ì•ˆì—ì„œë¶€í„° ë°”ê¹¥ìœ¼ë¡œ ì°¨ë¡€ëŒ€ë¡œ ê²€ìƒ‰
- ìŠ¤ì½”í”„ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œê°€ ì•„ë‹ˆë¼ í•¨ìˆ˜ë¥¼ ì–´ë””ì— ì„ ì–¸í•˜ì˜€ëŠ”ì§€ì— ë”°ë¼ ê²°ì •ëœë‹¤.


=> í•¨ìˆ˜ê°€ ì„ ì–¸ë  ë‹¹ì‹œì˜ lexical enviromentë€, outer environmentë¥¼ ì˜ë¯¸í•œë‹¤.
```jsx
function A() {
  ...
  var i;
  function B() { ... }
}
```

- í•¨ìˆ˜BëŠ” ìì‹ ì´ ì„ ì–¸ë  ë‹¹ì‹œì˜ lexical enviroment, ì¦‰ í•¨ìˆ˜Aì˜ lexical environmentì„ ê¸°ì–µí•œë‹¤.
- (= í•¨ìˆ˜Bì˜ outer í¬ì¸í„°ê°€ Aì˜ l.eë¥¼ ê°€ë¥´í‚¨ë‹¤.)
- í•¨ìˆ˜ BëŠ” í•¨ìˆ˜Aì— ì„ ì–¸í•œ ë³€ìˆ˜ì— ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤. ( Aì—ì„œ BëŠ” ë¶ˆê°€ëŠ¥)

```
ğŸ“Œ í´ë¡œì € : í•¨ìˆ˜ì™€ ê·¸ í•¨ìˆ˜ê°€ ì„ ì–¸ë  ë‹¹ì‹œì˜ lexical environmentì˜ ìƒí˜¸ê´€ê³„ì— ë”°ë¥¸ í˜„ìƒ
```
> ex) [í•¨ìˆ˜B] <-> [í•¨ìˆ˜Aì˜ l.e] 

#### ìƒí˜¸ ê´€ê³„?
- í•¨ìˆ˜ Bê°€ ì–¸ì œë‚˜ í•¨ìˆ˜ Aì˜ l.eë¥¼ ì‚¬ìš©í•˜ì§„ ì•ŠìŒ. ì™œ?
- í•¨ìˆ˜ Bì—ì„œ í•¨ìˆ˜ A ë‚´ë¶€ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ì§€ ì•ŠëŠ” ê²½ìš° í•„ìš”ì—†ìŒ.
- **ì¦‰, ë‚´ë¶€ í•¨ìˆ˜ì—ì„œ ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš°ì— í•œí•´ì„œë§Œ ìƒí˜¸ ê´€ê³„ê°€ ì˜ë¯¸ ìˆë‹¤.**

```
ğŸ“Œ í´ë¡œì €ëŠ” ì–´ë–¤ í•¨ìˆ˜ì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€ í•¨ìˆ˜ì—ì„œë§Œ ë°œìƒí•˜ëŠ” í˜„ìƒ
```
> ex) í•¨ìˆ˜Bì—ì„œ, í•¨ìˆ˜Aì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ië¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš°, ë°œìƒí•˜ëŠ” í˜„ìƒ => í´ë¡œì €

#### ë‚´ë¶€ í•¨ìˆ˜ì—ì„œ ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš°ëŠ” ì–´ë–¤ ìƒí™©ì¼ê¹Œ?

```jsx
var outer = function() { //ì™¸ë¶€ í•¨ìˆ˜
  var a=1; //ì™¸ë¶€ ë³€ìˆ˜
  var inner = function(){ //ë‚´ë¶€ í•¨ìˆ˜
    console.log(++a); //2
  };
  inner();
};
outer(); 
```
- `console.log(++a)` ê°€ ì‹¤í–‰ë  ë•Œ, inner í•¨ìˆ˜ ë‚´ë¶€ì—ëŠ” ì„ ì–¸ëœ aê°€ ì—†ë‹¤.
- innerí•¨ìˆ˜ì˜ environment recordì—ì„œ ê°’ì„ ëª» ì°¾ì•˜ìœ¼ë¯€ë¡œ, innerí•¨ìˆ˜ì˜ outer environment í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” `outerí•¨ìˆ˜ì˜ l.e` ì— ì ‘ê·¼í•´ì„œ aë¥¼ ì°¾ëŠ”ë‹¤.
- aë¥¼ ì°¾ì•˜ìœ¼ë¯€ë¡œ 2ë¥¼ ì¶œë ¥í•œë‹¤.
- outer() ì‹¤í–‰ì´ ëª¨ë‘ ì¢…ë£Œë˜ë©´, ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œë˜ë¯€ë¡œ l.eì— ì €ì¥ëœ ì‹ë³„ì a, innerì— ëŒ€í•œ ì°¸ì¡°ê°€ ì§€ì›Œì§„ë‹¤.
- ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ê°€ ì‚¬ë¼ì§€ë¯€ë¡œ GCì˜ ìˆ˜ê±° ëŒ€ìƒì´ ëœë‹¤.

#### ì¡°ê¸ˆ ë‚´ìš©ì„ ë°”ê¿”ì„œ, ë‚´ë¶€ í•¨ìˆ˜ ìì²´ë¥¼ ë°˜í™˜í•´ ì‹¤í–‰í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

```jsx
var outer = function() { //ì™¸ë¶€ í•¨ìˆ˜
  var a=1; //ì™¸ë¶€ ë³€ìˆ˜
  var inner = function(){ //ë‚´ë¶€ í•¨ìˆ˜
    return ++a;
  };
  return inner; // ë‚´ë¶€ í•¨ìˆ˜ ìì²´ë¥¼ ë°˜í™˜
};
var outer2 = outer(); // outer2 = inner;
console.log(outer2()) //inner() ì‹¤í–‰ => 2
console.log(outer2()) //inner() ì‹¤í–‰ => 3
```

- innerí•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©°, outer environment í¬ì¸í„°ë¥¼ ì«“ì•„ê°€ë©° 2, 3ì´ ì°¨ë¡€ëŒ€ë¡œ ì¶œë ¥ëœë‹¤.
- ì´ë•Œ, outer2í•¨ìˆ˜(=innerí•¨ìˆ˜)ê°€ ì‹¤í–‰ë  ë•ŒëŠ” ì´ë¯¸ outerí•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œëœ ìƒíƒœì´ë‹¤.
- ê·¼ë° ì–´ë–»ê²Œ outerí•¨ìˆ˜ì˜ l.eì— ì ‘ê·¼í•  ìˆ˜ ìˆì„ê¹Œ?

#### ê°€ë¹„ì§€ì»¬ë ‰í„°ì˜ ë™ì‘ ë°©ì‹ ë•Œë¬¸ì´ë‹¤!

- GCëŠ” ê°’ì„ ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ê°€ í•˜ë‚˜ë¼ë„ ìˆë‹¤ë©´, ìˆ˜ì§‘ ëŒ€ìƒì—ì„œ ì œì™¸í•œë‹¤.
  - ì¦‰, `ë„ë‹¬ ê°€ëŠ¥ì„±(reachability)` ì´ ìˆìœ¼ë©´, ì‚­ì œ x
  - ì „ì—­ë³€ìˆ˜ëŠ” íƒœìƒë¶€í„° ëŠ˜ ë„ë‹¬ ê°€ëŠ¥... 
- innerí•¨ìˆ˜ëŠ” ì–¸ì  ê°€ outer2ë¥¼ ì‹¤í–‰í•˜ì—¬ í˜¸ì¶œë  ê°€ëŠ¥ì„±ì´ ìˆë‹¤.
- ì–¸ì  ê°€ inner í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ í™œì„±í™”ë˜ë©´, innerí•¨ìˆ˜ì˜ outer environment í¬ì¸í„°ê°€ outerí•¨ìˆ˜ì˜ l.eë¥¼ í•„ìš”ë¡œí•˜ë¯€ë¡œ(ê°€ë¦¬í‚¤ë¯€ë¡œ) ìˆ˜ì§‘ëŒ€ìƒì—ì„œ ì œì™¸í•œë‹¤.

=> í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œë˜ì–´ë„ l.eê°€ GC ìˆ˜ì§‘ ëŒ€ìƒì—ì„œ ì œì™¸ë˜ëŠ” ê²½ìš°ëŠ”, **ì§€ì—­ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€í•¨ìˆ˜ê°€ ì™¸ë¶€ë¡œ ì „ë‹¬ ë  ë•Œ!**
 
#### outerí•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œë˜ì—ˆëŠ”ë°, outerí•¨ìˆ˜ì˜ l.eë¥¼ ì–´ë–»ê²Œ ê°€ë¦¬í‚¤ë‚˜ìš”?

- ì½œìŠ¤íƒì—ì„œ ì–´ë–¤ í•¨ìˆ˜ì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ì œê±°ë˜ì—ˆë‹¤ê³ í•´ì„œ, ë°˜ë“œì‹œ ê·¸ í•¨ìˆ˜ì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ì˜ lexical environmentê¹Œì§€ ì†Œë©¸í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì´ë‹¤!
- outerí•¨ìˆ˜ì˜ l.eëŠ” inner í•¨ìˆ˜ì˜ o.e í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ê³  ìˆê³ , inner í•¨ìˆ˜ëŠ” ì „ì—­ ë³€ìˆ˜ outer2ì— ì˜í•´ ì°¸ì¡°ë˜ê³  ìˆê¸° ë•Œë¬¸ì— GCì˜ ìˆ˜ì§‘ ëŒ€ìƒì—ì„œ ì œì™¸ëœë‹¤.


```
í´ë¡œì €ë€, í•¨ìˆ˜ Aì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ië¥¼ ì°¸ì¡°í•˜ëŠ” í•¨ìˆ˜Bë¥¼ ì™¸ë¶€ë¡œ ì „ë‹¬í•œ ê²½ìš°,
í•¨ìˆ˜Aì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œëœ ì´í›„ì—ë„ ë³€ìˆ˜ iê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” í˜„ìƒì´ë‹¤.
```

#### ì™¸ë¶€ë¡œì˜ ì „ë‹¬ì€ returnë§ê³  ì½œë°±í•¨ìˆ˜ë„ ì¡´ì¬í•œë‹¤ -> ë’¤ì—ì„œ ë‹¤ì‹œ ì„¤ëª…..

## í´ë¡œì €ì™€ ë©”ëª¨ë¦¬ ê´€ë¦¬

- GCì˜ ìˆ˜ê±°ëŒ€ìƒì´ ë˜ì§€ ì•Šë„ë¡ ê°œë°œìê°€ ì˜ë„ì ìœ¼ë¡œ ì„¤ê³„í•´ë²„ë¦°ë‹¤ë©´? **ëˆ„ìˆ˜ ë°œìƒ**...
- í´ë¡œì €ëŠ” í•„ìš”í•œ ì§€ì—­ë³€ìˆ˜ê°€ ë©”ëª¨ë¦¬ë¥¼ ì†Œëª¨í•˜ê²Œ í•œë‹¤. => í•„ìš”ê°€ ì—†ì–´ì§€ë©´ ë©”ëª¨ë¦¬ë¥¼ ì†Œëª¨ ì•ˆí•˜ê²Œ í•˜ë©´ ëœë‹¤.
- ì°¸ì¡° ì¹´ìš´í„°ë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ë©´ GCê°€ ìˆ˜ê±°í•´ê°€ë¯€ë¡œ, ì‹ë³„ìì— ì°¸ì¡°í˜•ì´ì•„ë‹Œ ê¸°ë³¸í˜•(`null`, `undefined`)ì„ í• ë‹¹í•œë‹¤.

```jsx
var outer = function() { //ì™¸ë¶€ í•¨ìˆ˜
  var a=1; //ì™¸ë¶€ ë³€ìˆ˜
  var inner = function(){ //ë‚´ë¶€ í•¨ìˆ˜
    return ++a;
  };
  return inner; // ë‚´ë¶€ í•¨ìˆ˜ ìì²´ë¥¼ ë°˜í™˜
};
var outer2 = outer(); // outer2 = inner;
console.log(outer2()) //inner() ì‹¤í–‰ => 2
console.log(outer2()) //inner() ì‹¤í–‰ => 3

outer2 = null; //outer2ì‹ë³„ìì˜ inner í•¨ìˆ˜ ì°¸ì¡°ë¥¼ ëŠëŠ”ë‹¤.
```

- outer2 --âŒ--> inner ----> outer.a
- inner(), outer.aëŠ” ì°¸ì¡°ì¹´ìš´í„° 0ì´ ë˜ë©° GCì˜ ìˆ˜ê±° ëŒ€ìƒì´ëœë‹¤.
  - ë£¨íŠ¸(global)ì—ì„œ ë„ë‹¬í•  ìˆ˜ ì—†ëŠ” ì™¸ë”´ ì„¬ -> ìˆ˜ê±° â­•
 
![gc_example](images/gc_example.png)

## í´ë¡œì € í™œìš© ì‚¬ë¡€ - ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì™¸ë¶€ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê³ ì í•  ë•Œ

```jsx
var fruits = ['apple', 'banana', 'peach']
var $ul = document.createElement('ul')

fruits.forEach(function(fruit) { //A
  var $li = document.createElement('li')
  $li.innerText = fruit
  $li.addEventListener('click', function() { //B
    alert('your choice is' + fruit);
  })
  $ul.appendChild($li)
})
document.body.appendChild($ul)
```

<ì‹¤í–‰ ê²°ê³¼>
- apple
- banana
- peach
> ê° li ëˆ„ë¥¼ ë•Œë§ˆë‹¤ í•´ë‹¹ ê³¼ì¼ ì´ë¦„ì„ ì¶œë ¥í•˜ëŠ” íŒì—…ì´ ëœ¬ë‹¤.

- Aê°€ 3ë²ˆ ì‹¤í–‰ë˜ë©° ê° ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ í™œì„±í™”ë˜ë©° liëŠ” apple, banana, peach ì´ë¦„ì„ ê°–ëŠ”ë‹¤.
- click ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤, ê° ì»¨í…ìŠ¤íŠ¸ì˜ Bê°€ í˜¸ì¶œë˜ë©° ì™¸ë¶€ ë³€ìˆ˜ fruitì„ ì°¸ì¡°í•  ì˜ˆì •ì´ë¯€ë¡œ, fruitëŠ” GC ìˆ˜ì§‘ ëŒ€ìƒì—ì„œ ì œì™¸ëœë‹¤. <br>
  **=> í´ë¡œì €!**
- addEventListenerì€ ì „ì—­ ê°ì²´ì¸ DOMì˜ ë©”ì†Œë“œì´ë¯€ë¡œ ê°€ëŠ¥í•œ ì¼ì´ë‹¤.


```jsx
var fruits = ['apple', 'banana', 'peach']
var $ul = document.createElement('ul')

var alertFruit = function(fruit) { // new!
  alert('your choice is ' + fruit)
}
fruits.forEach(function(fruit) { //A
  var $li = document.createElement('li')
  $li.innerText = fruit
  $li.addEventListener('click', alertFruit); // Bí•¨ìˆ˜ë¥¼ ì™¸ë¶€ë¡œ ë¶„ë¦¬
  })
  $ul.appendChild($li)
})
document.body.appendChild($ul)
```

<ì‹¤í–‰ ê²°ê³¼>
- apple
- banana
- peach
> ê° li ëˆ„ë¥¼ ë•Œë§ˆë‹¤ ' your choice is [object MouseEvent]' íŒì—… ì¶œë ¥.

#### ì™œ?
- ì½œë°± í•¨ìˆ˜ì¸ alertFruitì˜ íŒŒë¼ë¯¸í„°(fruit)ì— ëŒ€í•œ ì œì–´ê¶Œì€ addEventListenerì´ ê°€ì§„ ìƒíƒœì´ë‹¤.
- addEventListenerì€ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ, **ì²«ë²ˆì§¸ ì¸ìì— 'ì´ë²¤íŠ¸ ê°ì²´'ë¥¼ ì£¼ì…**í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
  - `...addEventListener('click', (e) => { ... }) //eëŠ” ì´ë²¤íŠ¸ ê°ì²´`
- ê³ ì°¨ í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ í•´ë‹¹ í˜„ìƒ í•´ê²° ê°€ëŠ¥!
  - `ê³ ì°¨ í•¨ìˆ˜` : í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê±°ë‚˜, í•¨ìˆ˜ë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜
 

```jsx
var fruits = ['apple', 'banana', 'peach']
var $ul = document.createElement('ul')

var alertFruitBuilder = function(fruit) { // new! ê³ ì°¨í•¨ìˆ˜
  return function() { //ìµëª… í•¨ìˆ˜ë¥¼ ë°˜í™˜
    alert('your choice is ' + fruit)
  } 
}
fruits.forEach(function(fruit) { //A
  var $li = document.createElement('li')
  $li.innerText = fruit
  $li.addEventListener('click', alertFruitBuilder(fruit)); // í˜„ì¬ fruit ê°’ì„ ì¸ìë¡œ ë„˜ê²¨ì£¼ë©° ì‹¤í–‰, ì´í›„ ë°˜í™˜ëœ í•¨ìˆ˜ë¥¼ ì½œë°±í•¨ìˆ˜ë¡œ ë“±ë¡.
  })
  $ul.appendChild($li)
})
document.body.appendChild($ul)
```
<ì‹¤í–‰ ê²°ê³¼>
- apple
- banana
- peach
> ê° li ëˆ„ë¥¼ ë•Œë§ˆë‹¤ í•´ë‹¹ ê³¼ì¼ ì´ë¦„ì„ ì¶œë ¥í•˜ëŠ” íŒì—…ì´ ëœ¬ë‹¤.

í´ë¦­ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´, alertFruitBuilderí•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì—´ë¦¬ë©´ì„œ, alertFruitBuilderí•¨ìˆ˜ì˜ outer environmentì˜ í¬ì¸í„°ê°€ ì™¸ë¶€í•¨ìˆ˜ì˜ l.eë¥¼ ê°€ë¦¬í‚¤ê¸° ë•Œë¬¸ì—, ì™¸ë¶€ íŒŒë¼ë¯¸í„°ì¸ fruitë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.

#### ì²œì²œíˆ ê³¼ì •ì„ ë³´ë©´...

1. í´ë¦­í•˜ë©´ `function() { alert(... + fruit) }` í•¨ìˆ˜ ì‹¤í–‰
2. fruitì„ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì°¾ìœ¼ë ¤ê³  í•˜ëŠ”ë° ì—†ìŒ. <= **ìŠ¤ì½”í”„ì²´ì¸**ìœ¼ë¡œ ì™¸ë¶€ë¡œ ë‚˜ê°€ë©° ì°¾ì•„ë´ì•¼í•¨.
3. í˜„ì¬ í•¨ìˆ˜ì˜ outer environmentì˜ í¬ì¸í„°ê°€ ì™¸ë¶€ í•¨ìˆ˜ì¸ `function(fruit) { return ë³¸ì¸ }` ì˜ lexical environmentì„ ê°€ë¦¬í‚¨ë‹¤. <= **fruitì°¾ìŒ!!**
4. fruitì—ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡í•˜ëŠ” ê³¼ì •ì—ì„œ, ê° fruit(apple, banana, peach)ì˜ ë§¤ê°œë³€ìˆ˜ ê°’ì´ í• ë‹¹ë˜ì—ˆê¸° ë•Œë¬¸ì—, ì •ìƒì ìœ¼ë¡œ í´ë¦­í•œ ê³¼ì¼ ì´ë¦„ íŒì—… ì¶œë ¥ì´ ê°€ëŠ¥í•˜ë‹¤.

#### ì¦‰, alertFruitBuilderì˜ ì‹¤í–‰ ê²°ê³¼ë¡œ ë°˜í™˜ëœ í•¨ìˆ˜`function() { alert(... + fruit) }` ì—ëŠ” í´ë¡œì €ê°€ ì¡´ì¬í•œë‹¤!

ì´ëŸ°ì‹ìœ¼ë¡œ ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.
